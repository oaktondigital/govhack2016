
<h2>MAPS</h2>

<button type="button" onclick="showPositions()">Show Positions</button>
<button type="button" onclick="showCurrentLocation()">Show Current Location</button>
<br/><br/><br/>
<div id="googleMap" style="width:500px;height:380px;"></div>
<script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyCw5Ps26fT2bt-Lp-b2--2po84rCfWZtTc">
</script>
<script>
  var map;
  var infoWindow;
function initialize() {
  var mapProp = {
    center:new google.maps.LatLng(51.508742,10.120850),
    zoom:5,
    mapTypeId:google.maps.MapTypeId.ROADMAP
  };
   map=new google.maps.Map(document.getElementById("googleMap"), mapProp);
  infoWindow = new google.maps.InfoWindow({map: map});


  if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(function(position) {
            var pos = {
              lat: position.coords.latitude,
              lng: position.coords.longitude
            };

            infoWindow.setPosition(pos);
            infoWindow.setContent('Current location.');
            map.setCenter(pos);
          }, function() {
           // handleLocationError(true, infoWindow, map.getCenter());
          });
        } else {
          // Browser doesn't support Geolocation
          //handleLocationError(false, infoWindow, map.getCenter());
        }

}

google.maps.event.addDomListener(window, 'load', initialize);

function showCurrentLocation(){
   if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(function(position) {
            var pos = {
              lat: position.coords.latitude,
              lng: position.coords.longitude
            };

            infoWindow.setPosition(pos);
            infoWindow.setContent('Current location.');
            map.setCenter(pos);
          }, function() {
           // handleLocationError(true, infoWindow, map.getCenter());
          });
        } else {
          // Browser doesn't support Geolocation
          //handleLocationError(false, infoWindow, map.getCenter());
        }
}

 
function showPositions(){
  
    // var positions = JSON.parse('{"l":"51.508742","long":"10.120850"}');
    // console.log('my current position is', positions);
 var markers=[
{title:"A",lat:"-35.304758000", lon:"149.122853000"},//,//149.122853,-35.304758
{title:"B",lat:"-35.304797000", lon:"149.122887000"},
{title:"C",lat:"-35.304806000", lon:"149.122895000"}
];

var infoWindow = new google.maps.InfoWindow(), marker, i;
var bounds = new google.maps.LatLngBounds();
    
    // Loop through our array of markers & place each one on the map  
    for( i = 0; i < markers.length; i++ ) {
      var markedPosn=markers[i];
      var position = new google.maps.LatLng(markedPosn.lat,markedPosn.lon);
        bounds.extend(position);
        marker = new google.maps.Marker({
            position: position,
            map: map,
            title: markedPosn.title
        });

        // Allow each marker to have an info window    
        google.maps.event.addListener(marker, 'click', (function(marker, i) {
            return function() {
              console.log('m',marker);
                infoWindow.setContent(marker.title);
                infoWindow.open(map, marker);
            }
        })(marker, i));

        map.fitBounds(bounds);

}
}

</script>



